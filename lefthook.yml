# Lefthook 配置文件
# 文档: https://lefthook.dev/

pre-commit:
    jobs:
        # 1. 格式化代码
        - name: Format code
          priority: 1
          glob: '*.{js,ts,jsx,tsx,vue,json,md,yaml,yml,css,scss,less,html}'
          run: bunx --bun prettier --write --cache --ignore-unknown {staged_files}

        # 2. Oxlint 代码检查（门禁）
        - name: Oxlint
          priority: 2
          glob: '*.{js,ts,jsx,tsx,vue}'
          run: bunx oxlint {staged_files}

        # 3. TypeScript 语法检查 (core)
        - name: TypeScript check (core)
          priority: 2
          root: packages/core
          glob: 'packages/core/**/*.ts'
          run: bunx tsgo --noEmit

        # 4. 运行测试
        - name: Run tests
          priority: 3
          run: bun test
